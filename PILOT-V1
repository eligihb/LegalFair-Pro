<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>×¨×™×©×•× ××ª×¢× ×™×™× ×™× â€“ ×™×¨×™×“ ××ª××—×™×</title>
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    /* --- CSS: ×¢×™×¦×•×‘ ×”××ª×¨ --- */
    *{box-sizing:border-box;}
    
    body{
      margin:0;
      padding:10px;
      font-family:'Heebo',sans-serif;
      background:#f3f4f6;
      color:#111827;
    }

    .shell{
      max-width:480px;
      margin:0 auto;
    }

    /* ×›×¤×ª×•×¨×™× ×¢×œ×™×•× ×™× */
    .top-bar{
      display:flex;
      gap:6px;
      margin-bottom:8px;
      flex-wrap:wrap;
      justify-content:space-between;
    }
    .top-btn{
      flex:1 1 0;
      border-radius:999px;
      border:1px solid #d1d5db;
      padding:6px 10px;
      font-size:.8rem;
      font-weight:600;
      background:#ffffff;
      cursor:pointer;
      text-align:center;
      white-space:nowrap;
    }
    .top-btn.main{
      background:#0f766e;
      color:#fff;
      border-color:#0f766e;
    }

    /* ×›×¨×˜×™×¡ ×¨××©×™ */
    .card{
      background:#ffffff;
      border-radius:16px;
      box-shadow:0 6px 18px rgba(15,23,42,.12);
      padding:14px 12px 16px;
    }

    h1{
      margin:0 0 4px;
      font-size:1.35rem;
      text-align:center;
      color:#0f766e;
    }
    .subtitle{
      text-align:center;
      font-size:.85rem;
      color:#6b7280;
      margin-bottom:8px;
    }

    .section-title{
      margin:10px 0 4px;
      font-size:.9rem;
      font-weight:700;
      color:#0f766e;
      border-bottom:1px solid #e5e7eb;
      padding-bottom:3px;
    }

    /* ×’×¨×™×“ (×¡×™×“×•×¨ ××œ×× ×˜×™×) */
    .grid{display:grid;gap:6px;}
    .grid-2{grid-template-columns: minmax(0,1.05fr) minmax(0,.95fr);}
    
    /* ×”×ª×××” ×œ××•×‘×™×™×œ */
    @media(max-width:600px){
      .grid-2{grid-template-columns:1fr;}
    }

    label{
      display:block;
      font-size:.82rem;
      font-weight:600;
      color:#374151;
      margin-bottom:2px;
    }
    .req::after{
      content:" *";
      color:#b91c1c;
      font-weight:700;
    }

    input,select,textarea{
      width:100%;
      border-radius:10px;
      border:1px solid #d1d5db;
      padding:7px 8px;
      font-size:.9rem;
      background:#f9fafb;
    }
    input:focus,select:focus,textarea:focus{
      outline:none;
      border-color:#0f766e;
      background:#fff;
    }
    
    textarea{resize:vertical;min-height:70px;}
    .short{max-width:220px;}
    .short-inline{max-width:200px;}
    .hint{font-size:.75rem;color:#9ca3af;margin-top:1px;}
    
    .error{
      border-color:#dc2626!important;
      background:#fef2f2!important;
    }

    /* ×›×¤×ª×•×¨×™× ×ª×—×ª×•× ×™× */
    .btn-main{
      width:100%;
      border:none;
      border-radius:999px;
      padding:10px;
      font-size:.96rem;
      font-weight:700;
      background:#0f766e;
      color:#fff;
      cursor:pointer;
      margin-top:10px;
    }
    .btn-sub{
      width:100%;
      margin-top:5px;
      border-radius:999px;
      padding:7px;
      font-size:.8rem;
      font-weight:600;
      border:1px solid #e5e7eb;
      background:#f9fafb;
      cursor:pointer;
    }

    .msg{
      margin-top:6px;
      font-size:.8rem;
      padding:5px 7px;
      border-radius:9px;
      display:none;
    }
    .msg-ok{background:#ecfdf3;border:1px solid #bbf7d0;color:#166534;}
    .msg-err{background:#fef2f2;border:1px solid #fecaca;color:#b91c1c;}

    /* ×¨×›×™×‘×™× ××™×•×—×“×™× */
    .stars{display:inline-flex;gap:3px;direction:ltr;}
    .star{font-size:1.3rem;cursor:pointer;color:#e5e7eb;}
    .star.filled{color:#f59e0b;}

    .traits{display:flex;flex-wrap:wrap;gap:5px;margin-top:3px;}
    .trait-chip{
      border-radius:999px;
      border:1px solid #d1d5db;
      padding:3px 8px;
      font-size:.78rem;
      cursor:pointer;
      background:#f9fafb;
    }
    .trait-chip.active{
      background:#0f766e;
      color:#fff;
      border-color:#0f766e;
    }

    /* ×¨×©×™××ª ×¨×©×•××•×ª */
    .records-wrap{margin-top:10px;}
    .records-title{font-size:.9rem;font-weight:700;color:#111827;margin-bottom:4px;}
    .record-card{
      background:#eef2ff;
      border:1px solid #c7d2fe;
      border-radius:12px;
      padding:8px 9px;
      margin-bottom:6px;
      font-size:.8rem;
    }
    .record-header{display:flex;justify-content:space-between;gap:6px;margin-bottom:4px;}
    .record-meta{color:#4b5563;font-size:.76rem;}
    .record-actions{display:flex;gap:4px;}
    .icon-btn{
      border:none;
      background:#fff;
      border-radius:999px;
      padding:1px 7px;
      font-size:.7rem;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap:3px;
    }
    .icon-btn.del{color:#b91c1c;}
    .icon-btn.edit{color:#065f46;}
  </style>
</head>
<body>

<div class="shell">
  <div class="top-bar">
    <button id="btnOpenRecords" class="top-btn">×¤×ª×— ×¨×©×•××•×ª</button>
    <button id="btnTopClear" class="top-btn">××™×¤×•×¡ ×˜×•×¤×¡</button>
    <button id="btnExportAdmin" class="top-btn main">×™×™×¦×•× / ×’×™×œ×™×•×Ÿ</button>
  </div>

  <div class="card">
    <h1>×¨×™×©×•× ××ª×¢× ×™×™× ×™×</h1>
    <div class="subtitle">×—×•×‘×¨×ª ×¢×‘×•×“×” ××§×•×•× ×ª ×œ×™×¨×™×“ ××ª××—×™×</div>

    <div class="section-title">×¤×¨×˜×™ ××•×§×“ ×•× ×¦×™×’</div>
    <div class="grid grid-2">
      <div>
        <label class="req">××•×§×“</label>
        <select id="center" class="short">
          <option value="">×‘×—×¨ ××•×§×“</option>
          <option>××•× ×™×‘×¨×¡×™×˜×ª ×¨×™×™×›××Ÿ</option>
          <option>(×¡×™××•×œ×¦×™×™×ª ×©×•×ª×¤×™× ×œ×“×¨×š)</option>
          <option>××•× ×™×‘×¨×¡×™×˜×ª ×‘×¨ ××™×œ×Ÿ</option>
          <option>××•× ×™×‘×¨×¡×™×˜×ª ×ª×œ-××‘×™×‘</option>
          <option>××›×œ×œ×ª ×©×¢×¨×™ ××“×¢ ×•××©×¤×˜</option>
          <option>×©×•×ª×¤×™× ×œ×“×¨×š</option>
          <option>××›×œ×œ×ª ×¡×¤×™×¨</option>
          <option>×”××›×œ×œ×” ×œ×× ×”×œ ×¨××©×œ"×¦</option>
          <option>×”××•× ×™×‘×¨×¡×™×˜×” ×”×¢×‘×¨×™×ª</option>
        </select>
      </div>
      <div>
        <label class="req">×©× × ×¦×™×’</label>
        <select id="agent" class="short-inline">
          <option value="">×‘×—×¨ × ×¦×™×’</option>
        </select>
      </div>
    </div>
    
    <div class="grid" style="margin-top:6px;">
      <div style="max-width:190px;">
        <label>×ª××¨×™×š ×™×¨×™×“</label>
        <input id="date" type="date">
      </div>
    </div>

    <div class="section-title">×¤×¨×˜×™ ×¡×˜×•×“× ×˜</div>
    <div class="grid">
      <div>
        <label>×©× ×¡×˜×•×“× ×˜</label>
        <input id="name" type="text" placeholder="×œ×“×•×’××”: ×“× ×” ×›×”×Ÿ">
      </div>
      <div class="grid grid-2">
        <div>
          <label>×©× ×”</label>
          <select id="year">
            <option value="">×‘×—×¨ ×©× ×”</option>
            <option>×©× ×” ×'</option>
            <option>×©× ×” ×‘'</option>
            <option>×©× ×” ×’'</option>
            <option>×©× ×” ×“'</option>
            <option>×¡×˜××–'</option>
          </select>
        </div>
        <div>
          <label>×¢×™×¨</label>
          <input id="city" type="text" placeholder="×œ×“×•×’××”: × ×ª× ×™×”">
        </div>
      </div>
      <div class="grid grid-2">
        <div>
          <label>×˜×œ×¤×•×Ÿ</label>
          <input id="phone" type="tel" inputmode="tel" placeholder="050-0000000">
        </div>
        <div>
          <label>××™×™×œ</label>
          <input id="email" type="email" class="short" placeholder="example@mail.com">
        </div>
      </div>
      <div>
        <label>×ª×—×•× ××•×¢×“×£</label>
        <select id="field">
          <option value="">×‘×—×¨ ×ª×—×•×</option>
          <option>×œ×™×˜×™×’×¦×™×”</option>
          <option>××¡×—×¨×™</option>
          <option>×—×“×œ×•×ª ×¤×™×¨×¢×•×Ÿ</option>
          <option>×“×™× ×™ ×¢×‘×•×“×”</option>
          <option>× ×–×™×§×™×Ÿ</option>
          <option>××©×¤×—×”</option>
          <option>×¤×œ×™×œ×™</option>
        </select>
      </div>
    </div>

    <div class="section-title">×”×ª×¨×©××•×ª ××”×¡×˜×•×“× ×˜</div>
    <div class="grid">
      <div>
        <label>×“×™×¨×•×’ (×›×•×›×‘×™×)</label>
        <div id="stars" class="stars">
          <span class="star" data-val="1">â˜…</span>
          <span class="star" data-val="2">â˜…</span>
          <span class="star" data-val="3">â˜…</span>
          <span class="star" data-val="4">â˜…</span>
          <span class="star" data-val="5">â˜…</span>
        </div>
      </div>
      <div>
        <label>×××¤×™×™× ×™× ×‘×•×œ×˜×™×</label>
        <div id="traitsBox" class="traits">
          <span class="trait-chip" data-t="×—×¨×™×¦×•×ª">×—×¨×™×¦×•×ª</span>
          <span class="trait-chip" data-t="××§×¦×•×¢×™×•×ª">××§×¦×•×¢×™×•×ª</span>
          <span class="trait-chip" data-t="× ×™×¡×™×•×Ÿ">× ×™×¡×™×•×Ÿ</span>
          <span class="trait-chip" data-t="×©×¤×” ×¢×©×™×¨×”">×©×¤×” ×¢×©×™×¨×”</span>
          <span class="trait-chip" data-t="×›×¨×™×–××˜×™">×›×¨×™×–××˜×™</span>
          <span class="trait-chip" data-t="×•×¨×‘×œ×™">×•×¨×‘×œ×™</span>
          <span class="trait-chip" data-t="×‘×™×™×©×Ÿ">×‘×™×™×©×Ÿ</span>
        </div>
      </div>
      <div>
        <label>×”×ª×¨×©××•×ª ×›×œ×œ×™×ª</label>
        <textarea id="impression" placeholder="×¨×•×©×, ×”×ª×××”, ×—×•×•&quot;×“..."></textarea>
      </div>
      <div>
        <label>×”×¢×¨×•×ª ×¤× ×™××™×•×ª</label>
        <textarea id="notes" placeholder="×¤×¨×˜×™ ×”××©×š ×˜×™×¤×•×œ, ×ª×–×›×•×¨×•×ª ×•×¢×•×“..."></textarea>
      </div>
    </div>

    <button id="btnSave" class="btn-main">×”×•×¡×£ ×¨×©×•××”</button>
    <button id="btnClear" class="btn-sub">× ×§×” ×˜×•×¤×¡</button>
    
    <div id="msgOk" class="msg msg-ok"></div>
    <div id="msgErr" class="msg msg-err"></div>
  </div>

  <div class="records-wrap">
    <div class="records-title">×¨×©×•××•×ª ×©×”×•×–× ×• ××”××›×©×™×¨ ×”×–×”</div>
    <div id="recordsList"></div>
  </div>
</div>

<script>
// --- ×”×’×“×¨×•×ª ---
// âš ï¸ ××œ ×ª×©×›×— ×œ×¢×“×›×Ÿ ××ª ×”-URL ×‘××™×“×” ×•×”×©×ª× ×”
const API_URL    = 'https://script.google.com/macros/s/AKfycbwip8xRO6q99yg_iX5KRddVmv3suZmeCEQJ4_TGY4MVtENw3WcrDHUEnTUBI3D7KdE/exec';
const ADMIN_CODE = '2100';
const SHEET_URL  = 'https://docs.google.com/spreadsheets/d/1Oz32yNCobHdhz0APS4zl5O34rkqZxGvP0TJgPKKDLdk/edit?pli=1&gid=487137334#gid=487137334';
const STORAGE_KEY = 'lfp_records_v4';
const OWNER_KEY   = 'lfp_owner_id_v1';

let records = [];
let ownerId = null;
let editingId = null;
let currentRating = 0;

const E = id => document.getElementById(id);

// --- ×œ×•×— ×–×× ×™× ---
const FAIR_SCHEDULE = [
  { centerName:"××•× ×™×‘×¨×¡×™×˜×ª ×¨×™×™×›××Ÿ", date:"2025-12-01", agents:["×™×¢×§×‘","××•×¤×™×¨","×©×§×“","×’×œ"] },
  { centerName:"(×¡×™××•×œ×¦×™×™×ª ×©×•×ª×¤×™× ×œ×“×¨×š)", date:"2025-12-02", agents:["××•×¨×™","××™×ª×™ ×©×’×‘","×¦×™×•× ×”"] },
  { centerName:"××•× ×™×‘×¨×¡×™×˜×ª ×‘×¨ ××™×œ×Ÿ", date:"2025-12-03", agents:["××™×œ×•×Ÿ","×™×¢×§×‘","××œ×™××‘","×‘×™×¡××Ÿ"] },
  { centerName:"××•× ×™×‘×¨×¡×™×˜×ª ×ª×œ-××‘×™×‘", date:"2025-12-04", agents:["××•×¨×™","××•×¤×™×¨","×¦×œ×™×œ"] },
  { centerName:"××›×œ×œ×ª ×©×¢×¨×™ ××“×¢ ×•××©×¤×˜", date:"2025-12-08", agents:["××•×¨×™","××•×¤×™×¨","×¦×œ×™×œ"] },
  { centerName:"×©×•×ª×¤×™× ×œ×“×¨×š", date:"2025-12-08", agents:["××™×ª×™*","×¦×™×•× ×”*"] },
  { centerName:"××›×œ×œ×ª ×¡×¤×™×¨", date:"2025-12-09", agents:["×‘×§×™","××™×ª×™"] },
  { centerName:"×”××›×œ×œ×” ×œ×× ×”×œ ×¨××©×œ\"×¦", date:"2025-12-25", agents:["××•×¨×™","×¦×™×•× ×”","××•×¤×™×¨"] },
  { centerName:"×”××•× ×™×‘×¨×¡×™×˜×” ×”×¢×‘×¨×™×ª", date:"2025-12-28", agents:["××•×¨×™","××œ×™××‘"] }
];

function initOwner(){
  ownerId = localStorage.getItem(OWNER_KEY);
  if(!ownerId){
    ownerId = 'u_' + Date.now() + '_' + Math.random().toString(36).slice(2,8);
    localStorage.setItem(OWNER_KEY, ownerId);
  }
}

// --- ××™×¨×•×¢×™× ×‘×¡×™×¡×™×™× ---
E('phone').addEventListener('input', () => {
  const digits = E('phone').value.replace(/\D/g,'').slice(0,10);
  E('phone').value = digits;
});

function updateStars(v){
  currentRating = v;
  document.querySelectorAll('#stars .star').forEach(s=>{
    const val = Number(s.dataset.val);
    s.classList.toggle('filled', val<=v);
  });
}
document.querySelectorAll('#stars .star').forEach(s=>{
  s.addEventListener('click',()=>updateStars(Number(s.dataset.val)));
});
document.querySelectorAll('.trait-chip').forEach(ch=>{
  ch.addEventListener('click',()=>ch.classList.toggle('active'));
});

// ×©×™× ×•×™ ××•×§×“
function onCenterChange(){
  const val = E('center').value;
  const slot = FAIR_SCHEDULE.find(s=>s.centerName===val);
  if(slot){
    E('date').value = slot.date;
    const agentSel = E('agent');
    agentSel.innerHTML = '<option value="">×‘×—×¨ × ×¦×™×’</option>';
    slot.agents.forEach(a=>{
      const clean = a.replace('*','').trim();
      const opt = document.createElement('option');
      opt.value = clean;
      opt.textContent = clean;
      agentSel.appendChild(opt);
    });
  }else{
    E('date').value = '';
    E('agent').innerHTML = '<option value="">×‘×—×¨ × ×¦×™×’</option>';
  }
}
E('center').addEventListener('change', onCenterChange);

// --- ×•×œ×™×“×¦×™×” ×•× ×™×§×•×™ ---
function clearErrors(){
  ['center','agent','phone','email'].forEach(id=>E(id).classList.remove('error'));
  E('msgErr').style.display='none';
  E('msgOk').style.display='none';
}
function isValidPhone(p){
  const d = (p||'').replace(/\D/g,'');
  return !d || d.length===9 || d.length===10;
}
function isValidEmail(e){
  if(!e) return true;
  const re=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return re.test(e);
}

// ×¤×•× ×§×¦×™×™×ª ×”× ×™×§×•×™
function clearForm(fullReset = false){
  clearErrors();
  ['name','year','city','phone','email','field','impression','notes'].forEach(id => E(id).value = '');
  updateStars(0);
  document.querySelectorAll('.trait-chip').forEach(ch => ch.classList.remove('active'));

  if(fullReset){
    E('center').value = '';
    onCenterChange();
    editingId = null;
  }
  window.scrollTo({top:0, behavior:'smooth'});
}

// --- ×©××™×¨×” ---
async function saveRecord(){
  clearErrors();
  const center = E('center').value.trim();
  const agent  = E('agent').value.trim();
  const date   = E('date').value;
  const name   = E('name').value.trim();
  const year   = E('year').value;
  const city   = E('city').value.trim();
  const phone  = E('phone').value.trim();
  const email  = E('email').value.trim();
  const field  = E('field').value;
  const impression = E('impression').value.trim();
  const notes      = E('notes').value.trim();
  const traits = Array.from(document.querySelectorAll('.trait-chip.active')).map(ch=>ch.dataset.t);

  const errors = [];
  if(!center){errors.push('×™×© ×œ×‘×—×•×¨ ××•×§×“.');E('center').classList.add('error');}
  if(!agent){errors.push('×™×© ×œ×‘×—×•×¨ × ×¦×™×’.');E('agent').classList.add('error');}
  if(!isValidPhone(phone)){errors.push('××¡×¤×¨ ×”×˜×œ×¤×•×Ÿ ××™× ×• ×ª×§×™×Ÿ.');E('phone').classList.add('error');}
  if(!isValidEmail(email)){errors.push('×›×ª×•×‘×ª ×”××™×™×œ ××™× ×” ×ª×§×™× ×”.');E('email').classList.add('error');}

  if(errors.length){
    E('msgErr').textContent = errors.join(' ');
    E('msgErr').style.display='block';
    return;
  }

  const id = editingId || ('r_'+Date.now()+'_'+Math.random().toString(36).slice(2,7));
  const now = new Date();
  const time = now.toLocaleTimeString('he-IL', {hour:'2-digit', minute:'2-digit'});

  const rec = {
    id, ownerId, center, agent, date, time,
    name, year, city, phone, email, field,
    rating:currentRating, traits, impression, notes
  };

  const idx = records.findIndex(r=>r.id===id);
  if(idx>=0) records[idx]=rec;
  else records.push(rec);

  persistRecords();
  renderRecords();

  try{
    if(API_URL && API_URL.includes('script.google.com')){
      fetch(API_URL,{
        method:'POST',
        body:JSON.stringify({action:'add', ownerId, record:rec})
      });
    }
    E('msgOk').textContent = '×”×˜×•×¤×¡ × ×©×œ×— ×‘×”×¦×œ×—×”!';
    E('msgOk').style.display='block';
    alert('×”× ×ª×•× ×™× × ×©××¨×• ×‘×”×¦×œ×—×”!');
  }catch(err){ console.error(err); }

  clearForm(false);
}

// --- ×˜×¢×™× ×” ×•××—×™×§×” ---
function loadRecords(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    records = raw ? JSON.parse(raw) : [];
  }catch{ records=[]; }
}
function persistRecords(){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(records));
}

function renderRecords(){
  const box = E('recordsList');
  box.innerHTML='';
  const mine = records.filter(r=>r.ownerId===ownerId);
  if(!mine.length){
    box.innerHTML='<div style="font-size:.78rem;color:#9ca3af;">××™×Ÿ ×¨×©×•××•×ª ×œ×”×¦×’×”.</div>';
    return;
  }
  mine.sort((a,b) => b.id.localeCompare(a.id));

  mine.forEach(r=>{
    const div = document.createElement('div');
    div.className='record-card';
    div.innerHTML = `
      <div class="record-header">
        <div>
          <strong>${r.name || '×œ×œ× ×©×'}</strong>
          <div class="record-meta">${r.time || ''} Â· ${r.center}</div>
        </div>
        <div class="record-actions">
          <button class="icon-btn edit" data-id="${r.id}">âœ ×¢×¨×•×š</button>
          <button class="icon-btn del" data-id="${r.id}">ğŸ—‘ ××—×§</button>
        </div>
      </div>
      <div class="record-meta">
        ${r.phone || '-'} Â· ${r.email || '-'}
      </div>
    `;
    box.appendChild(div);
  });

  box.querySelectorAll('.icon-btn.edit').forEach(btn => btn.addEventListener('click',()=>startEdit(btn.dataset.id)));
  box.querySelectorAll('.icon-btn.del').forEach(btn => btn.addEventListener('click',()=>deleteRecord(btn.dataset.id)));
}

function startEdit(id){
  const r = records.find(x=>x.id===id);
  if(!r) return;
  editingId = id;
  E('center').value=r.center||'';
  onCenterChange();
  E('agent').value=r.agent||'';
  E('date').value=r.date||'';
  E('name').value=r.name||'';
  E('year').value=r.year||'';
  E('city').value=r.city||'';
  E('phone').value=r.phone||'';
  E('email').value=r.email||'';
  E('field').value=r.field||'';
  E('impression').value=r.impression||'';
  E('notes').value=r.notes||'';
  document.querySelectorAll('.trait-chip').forEach(ch=>{
    ch.classList.toggle('active', (r.traits||[]).includes(ch.dataset.t));
  });
  updateStars(r.rating||0);
  window.scrollTo({top:0,behavior:'smooth'});
}

async function deleteRecord(id){
  const r = records.find(x=>x.id===id);
  if(!r) return;
  if(!confirm('×œ××—×•×§ ××ª ×”×¨×©×•××”?')) return;
  records = records.filter(x=>x.id!==id);
  persistRecords();
  renderRecords();
  try{
    if(API_URL) fetch(API_URL,{
      method:'POST',
      body:JSON.stringify({action:'delete', ownerId, record:r})
    });
  }catch(e){}
}

// --- ×›×¤×ª×•×¨×™× ×¨××©×™×™× ---
E('btnTopClear').addEventListener('click',()=>clearForm(true));
E('btnOpenRecords').addEventListener('click',()=>{
  E('recordsList').scrollIntoView({behavior:'smooth'});
});
E('btnExportAdmin').addEventListener('click',()=>{
  const code = prompt('×§×•×“ ××•×¨×©×”:');
  if(code===ADMIN_CODE) window.open(SHEET_URL,'_blank');
});
E('btnClear').addEventListener('click',()=>clearForm(true));
E('btnSave').addEventListener('click',saveRecord);

(function init(){
  initOwner();
  loadRecords();
  renderRecords();
})();
</script>
</body>
</html>
